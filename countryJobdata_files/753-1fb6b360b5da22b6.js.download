try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="7301c3e2-215d-47dc-9ee3-7beccaf37a15",e._sentryDebugIdIdentifier="sentry-dbid-7301c3e2-215d-47dc-9ee3-7beccaf37a15")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[753],{3111:(e,t,n)=>{n.d(t,{d:()=>a});let a=e=>{let{pathname:t,searchParams:n,queryString:a,isClaudeApp:i}=e,r="".concat(t,"?").concat(a),o=n.get("origin");if(o)r=o;else if(i){let e=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,n=t.startsWith("/project/")&&e.test(t.slice(9)),i=t.startsWith("/chat/")&&e.test(t.slice(6)),o=n||i||"/new"===t?t:"/new";r="claude://claude.ai".concat(o,"?").concat(a)}return r}},12142:(e,t,n)=>{n.d(t,{Q:()=>u});var a=n(74813),i=n(64328),r=n(28044),o=n(27541),s=n(3111);let u=function(){let{pathname:e,queryString:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,i.YL)(),u=(0,o.usePathname)(),c=(0,o.useSearchParams)(),l=(0,r.V)(),{track:d}=(0,a.st)(),g="".concat((0,s.d)({pathname:e||u,searchParams:c,queryString:t,isClaudeApp:l}));return e=>{let{uuid:t,url:a}=e;d({event_key:"claudeai.mcp.auth.init",uuid:t,url:a}),window.location.href="/api/organizations/".concat(null==n?void 0:n.uuid,"/mcp/start-auth/").concat(t,"?redirect_url=").concat(encodeURIComponent(g),"&open_in_browser=1")}}},22167:(e,t,n)=>{n.d(t,{Cg:()=>K,Dd:()=>E,FZ:()=>T,LN:()=>b,TI:()=>j,X0:()=>D,XE:()=>Q,Ys:()=>R,dJ:()=>I,eL:()=>C,fe:()=>M,kO:()=>G,ob:()=>Y,ph:()=>w,tS:()=>L,vm:()=>z,xc:()=>k,z3:()=>P});var a=n(94295),i=n(1613),r=n(64328),o=n(35984),s=n(16178),u=n(80688),c=n(68067),l=n(2e3),d=n(28044),g=n(66365),v=n(4869),_=n(27541),p=n(7620),y=n(10369),f=n(3111),m=n(12142),h=n(35580),S=n(40459);let L=e=>e.type===l.v8.GITHUB?{sync_source_type:l.v8.GITHUB,sync_source_config:e.config}:e.type===l.v8.GDRIVE?{sync_source_type:l.v8.GDRIVE,sync_source_config:e.config}:null,b=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid;return(0,i.Sk)("/api/organizations/".concat(t,"/sync/settings"),{queryKey:[u._V,{orgUuid:t}],enabled:!!e})},k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,a=(0,v.useQueryClient)();return(0,i.Qv)("/api/organizations/".concat(n,"/sync/settings"),"PUT",(e,t)=>{let{type:n,enabled:a}=e;t||(t=[]);let i=t.map(e=>e.type===n?{...e,enabled:a}:e);return i.some(e=>e.type===n)?i:[...t,{type:n,enabled:a}]},{queryKey:[u._V,{orgUuid:n}],enabled:!!t,onSuccess:async function(){for(var t,i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];await a.invalidateQueries({queryKey:[u._V,{orgUuid:n}]}),await (null==(t=e.onSuccess)?void 0:t.call(e,...r))},meta:{errorMessage:"There was an error changing your settings. Please try again."},...e})},w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,a=(0,v.useQueryClient)(),{value:o}=(0,c.fS)("kingfisher_enabled"),{value:s}=(0,c.fS)("apps_use_bananagrams"),l=(0,g.useLayer)("trials_freemium").get("free_integrations",!1);return(0,i.Qv)("/api/organizations/".concat(n,"/sync/settings/config"),"POST",(e,t)=>{let{type:n,config:a}=e;return t||(t=[]),t.map(e=>e.type===n?{...e,config:{...e.config,...a}}:e)},{queryKey:[u._V,{orgUuid:n}],enabled:!!(t&&(o||l)&&s),onSuccess:async function(){for(var t,i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];await a.invalidateQueries({queryKey:[u._V,{orgUuid:n}]}),await (null==(t=e.onSuccess)?void 0:t.call(e,...r))},meta:{errorMessage:"There was an error changing your settings. Please try again."},...e})},T=e=>{let{callerIdentifier:t,successParam:n,handleOpen:a}=e,i=(0,_.useSearchParams)(),r=(0,p.useRef)(!1);(0,p.useEffect)(()=>{!i.has(n)||r.current||t&&t!==i.get(n)||(r.current=!0,((e,t)=>{let n=new URLSearchParams(Array.from(t.entries()));n.delete(e);let a=n.toString()?"?".concat(n.toString()):"",i=window.location.pathname+a;window.history.replaceState({...window.history.state,as:i,url:i},"",i)})(n,i),a())},[i,t,a,n])},P=e=>{let t;return t=e.status.state,[l.I5.CREATED,l.I5.PENDING,l.I5.UPDATING].includes(t)},E=e=>[l.I5.FAILED,l.I5.UPDATE_FAILED].includes(e.status.state),C=()=>{let{addError:e}=(0,o.Y)(),t=(0,v.useQueryClient)();return(n,a)=>{(e=>{if(e instanceof s.LG)return e instanceof s.LG&&"access_denied"===e.errorCode})(n)&&(e("Please try again. You may need to reconnect with your ".concat(l.sb[a.sync_source_type]," account."),{error:n}),u.ku.forEach(e=>{t.invalidateQueries({queryKey:[e]})}),t.invalidateQueries({queryKey:[u.GC]}))}},A={[l.v8.GCAL]:"enabled_foccacia",[l.v8.GMAIL]:"enabled_sourdough"},Q=e=>{let t="cinnabon_enabled";switch(e){case l.v8.GCAL:case l.v8.GMAIL:t="pumpernickel_enabled";break;case l.v8.GDRIVE:t="kingfisher_enabled";break;default:t="cinnabon_enabled"}let{value:n}=(0,c.fS)(t),a=(0,g.useLayer)("trials_freemium").get("free_integrations",!1),i=n||(e===l.v8.GCAL||e===l.v8.GMAIL||e===l.v8.GDRIVE)&&a;return!S.env.NEXT_PUBLIC_DISABLE_INTEGRATIONS&&i},j={"https://mcp-server-gcal-586545259222.us-central1.run.app/sse":l.v8.GCAL,"https://mcp-server-gcal-586545259222.us-central1.run.app/mcp":l.v8.GCAL,"https://gcal.mcp.claude.com/mcp":l.v8.GCAL,"https://gcal.mcp.staging.ant.dev/mcp":l.v8.GCAL,"https://mcp-server-gmail-110131437935.us-central1.run.app/sse":l.v8.GMAIL,"https://mcp-server-gmail-110131437935.us-central1.run.app/mcp":l.v8.GMAIL,"https://gmail.mcp.claude.com/mcp":l.v8.GMAIL,"https://gmail.mcp.staging.ant.dev/mcp":l.v8.GMAIL,"https://api.anthropic.com/mcp/gdrive/sse":l.v8.GDRIVE,"https://api.anthropic.com/mcp/gdrive/mcp":l.v8.GDRIVE},I=e=>!!(0,h.Uz)({type:"remote"}).find(t=>t.url&&j[t.url]===e),z=()=>{let{value:e}=(0,c.fS)("enabled_brioche");return e},G=()=>{let{value:e}=(0,c.fS)("mcp_gdrive");return e},R=e=>{let t=z(),n=G(),a=(e=>{let t=(0,r.mV)(),{data:n}=b(),a=!!(Array.isArray(n)&&n.find(t=>t.type===e&&t.enabled));return!t||a})(e),i=Q(e),o=I(e),s=e===l.v8.GDRIVE?n:t;return!!(i&&(a||s&&o))},q=e=>"sfdc"===e?"salesforce":"gdrive"===e?"mcp/drive":e,K=e=>{let t=(0,h.Uz)().find(t=>"remote"===t.type&&t.url&&j[t.url]===e);return t?{isFetched:!0,isAuthenticated:!!t.isConnected,server_uuid:t.uuid}:{isFetched:!1,isAuthenticated:!1,server_uuid:void 0}},Y=function(e){let{callerIdentifier:t,handleAuthSuccess:n,pathname:a,queryString:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=G(),c=z(),g=e===l.v8.GDRIVE?u:c,S=((e,t)=>{let{pathname:n,queryString:a,callerIdentifier:i}=t,r=(0,h.Uz)().find(t=>"remote"===t.type&&t.url&&j[t.url]===e),o=R(e),s=K(e),u=i?"".concat(e,"_success=").concat(i).concat(a?"&".concat(a):""):a,c=(0,m.Q)({pathname:n,queryString:u});return{isAuthenticated:!!o&&!!r&&s.isAuthenticated,startAuth:()=>{o&&r&&c({uuid:r.uuid,url:r.url})},disconnect:()=>{},isFetched:!!r&&s.isFetched}})(e,{pathname:a,queryString:s,callerIdentifier:t}),{activeOrganization:L}=(0,r.YL)(),b=null==L?void 0:L.uuid,k=(0,_.usePathname)(),w=(0,_.useSearchParams)(),{addSuccess:P}=(0,o.Y)(),E=(0,y.A)(),C=R(e),A=(0,v.useQueryClient)(),Q=(0,d.V)(),{data:I,isFetched:Y}=(0,i.Sk)("/api/organizations/".concat(b,"/sync/").concat(q(e),"/auth"),{queryKey:["sync_".concat(e,"_auth_status"),{orgUuid:b}],enabled:!!(L&&C)}),D=(0,p.useRef)(!1),{mutate:M}=(0,i.L2)("/api/organizations/".concat(b,"/sync/").concat(q(e),"/auth/start"),"POST",{enabled:!!(L&&C)&&!g,onSuccess:e=>{window.location.href=e.redirect_url}});T({callerIdentifier:t,successParam:"".concat(e,"_success"),handleOpen:()=>{P(E.formatMessage({defaultMessage:"Successfully connected to {integrationName}",id:"T7cL93l/KQ"},{integrationName:l.sb[e]})),null==n||n(!0)}});let{mutate:U}=(0,i.L2)("/api/organizations/".concat(b,"/sync/").concat(q(e),"/auth"),"DELETE",{enabled:!!(L&&C)&&!g,onSuccess:()=>{A.invalidateQueries({queryKey:["sync_".concat(e,"_auth_status"),{orgUuid:b}]})}});return g&&S.isFetched?{...S,authBreakdown:{mcp:C&&S.isAuthenticated,firstParty:C&&!!(null==I?void 0:I.is_authenticated)},mcpServerGated:g}:{isAuthenticated:C&&!!(null==I?void 0:I.is_authenticated),startAuth:()=>{if(!D.current&&C){let n="".concat(e,"_success=").concat(t).concat(s?"&".concat(s):""),i=(0,f.d)({pathname:a||k,searchParams:w,queryString:n,isClaudeApp:Q});if(Q){window.location.href="/settings/connectors?open_in_browser=1&auth_start=".concat(e,"&origin=").concat(i);return}D.current=!0,M({pre_auth_state:{origin:i},redirect_uri:new URL("/connect/".concat(q(e),"/callback"),window.location.origin).toString()})}},disconnect:U,isFetched:Y,authBreakdown:{mcp:C&&S.isAuthenticated,firstParty:C&&!!(null==I?void 0:I.is_authenticated)},mcpServerGated:g}},D=(e,t)=>{var n,a;let i=z(),o=G(),s=e===l.v8.GDRIVE?o:i,u=R(e),{account:c}=(0,r.YL)(),d=A[e];return!d||s?u:u&&(t?!!(null==t||null==(n=t.conversationSettings)?void 0:n[d]):!!(null==c||null==(a=c.settings)?void 0:a[d]))},M=()=>{let{account:e}=(0,r.YL)(),{mutate:t}=(0,a.Jy)();return{toggleIntegrationEnabled:(n,a)=>{if(!e)return;let i=A[n];i&&t({...e.settings,[i]:a})}}}},22624:(e,t,n)=>{n.d(t,{K:()=>s,p:()=>u});var a=n(64328),i=n(60687),r=n(95617),o=n(66365);let s=()=>{let e=(0,a.O9)(),t=(0,a.zc)(),n=(0,a.mV)(),{selectedTier:s,shouldOverrideFeatureAccess:u,isTierSelectorEnabled:c}=(0,i.t)(),l=(0,o.useDynamicConfig)("claude_ai_projects_limits").get("max_free_projects",0)>0,d=c&&u&&s?s===r.d7.PRO||s===r.d7.MAX||s===r.d7.ENTERPRISE:e||t||n,g=(0,o.useLayer)("trials_freemium").get("free_project",!1);return l||d||g},u=()=>{let e=(0,a.O9)(),t=(0,a.zc)(),n=(0,a.mV)(),{selectedTier:s,shouldOverrideFeatureAccess:u,isTierSelectorEnabled:c}=(0,i.t)(),l=(0,o.useDynamicConfig)("claude_ai_projects_limits"),d=(0,o.useLayer)("trials_freemium");if(c&&u&&s?s===r.d7.PRO||s===r.d7.MAX||s===r.d7.ENTERPRISE:e||t||n)return;let g=l.get("max_free_projects",0);return g>0?g:+!!d.get("free_project",!1)}},34003:(e,t,n)=>{n.d(t,{Gh:()=>d,JO:()=>y,Vx:()=>m,Yl:()=>p,d6:()=>f,t5:()=>g,u9:()=>_});var a=n(94295),i=n(1613),r=n(64328),o=n(35984),s=n(80688),u=n(68067),c=n(7620),l=n(10369);function d(){let{value:e}=(0,u.fS)("trials_and_tribulations_of_high_school_football");return e}function g(){var e,t;let n=(0,r.mV)(),a=(0,r.zm)(),{activeOrganization:o}=(0,r.YL)(),{data:u}=(0,i.Sk)("/api/organizations/".concat(null==o?void 0:o.uuid,"/feature_settings"),{queryKey:[s.RR,null==o?void 0:o.uuid],enabled:!!(null==o?void 0:o.uuid)&&n});if(a)return!!u&&!(null==(t=u.disabled_features)?void 0:t.includes("wiggle"));let c=!!u&&!(null==(e=u.disabled_features)?void 0:e.includes("wiggle"));return!n||c}function v(){var e;let{account:t}=(0,r.YL)(),{value:n}=(0,u.fS)("default_wiggle_on");if(null==t?void 0:t.settings)return null!=(e=t.settings.enabled_monkeys_in_a_barrel)?e:n}function _(){let e=d(),t=g(),n=v();return!!e&&!!t&&n}function p(){let e=d(),t=g();return e&&t}function y(){let e=_(),{value:t}=(0,u.fS)("claudeai_skills");return!!e&&t}function f(){let e=p(),{value:t}=(0,u.fS)("claudeai_skills");return e&&t}let m=()=>{let e=(0,l.A)(),{account:t}=(0,r.YL)(),{addSuccess:n}=(0,o.Y)(),i=v(),s=g(),{mutate:u}=(0,a.Jy)(),d=(0,c.useRef)(null==t?void 0:t.settings);return(0,c.useEffect)(()=>{d.current=null==t?void 0:t.settings},[null==t?void 0:t.settings]),{isEnabled:i,toggleWiggle:(0,c.useCallback)(a=>{if(t&&s){if(a){var i,r;let t=null==(i=d.current)?void 0:i.enabled_artifacts_attachments,a=[];t&&a.push("Analysis Tool"),a.length>0&&n(e.formatMessage({defaultMessage:"Automatically disabled: {features}",id:"7StJBCedWA"},{features:a.join(", ")})),(null==(r=d.current)?void 0:r.preview_feature_uses_artifacts)||n(e.formatMessage({defaultMessage:"Automatically enabled: Artifacts",id:"v5zt5SRUyk"}))}u({...d.current,enabled_monkeys_in_a_barrel:a,...a&&{enabled_artifacts_attachments:!1,preview_feature_uses_artifacts:!0}})}},[t,s,u,n,e])}}},45538:(e,t,n)=>{n.d(t,{BN:()=>A,CB:()=>h,GQ:()=>j,Gz:()=>Q,Kf:()=>L,LQ:()=>C,PL:()=>m,Zd:()=>q,bL:()=>T,bs:()=>b,dx:()=>p,eW:()=>E,fo:()=>k,gM:()=>y,gr:()=>f,kj:()=>R,mu:()=>z,my:()=>G,nl:()=>K,sC:()=>_,sS:()=>P,u7:()=>S,xQ:()=>I});var a=n(19736),i=n(1613),r=n(64328),o=n(35984),s=n(16178),u=n(80688),c=n(68067),l=n(4869),d=n(7620),g=n(10369),v=n(22624);let _=30,p=1e4;var y=function(e){return e.Student="student",e.Meeting="meeting",e.Haystack="haystack",e}({}),f=function(e){return e.Study="study",e.Career="career",e.Research="research",e.Zoom="zoom",e.Teams="teams",e.GoogleMeet="google_meet",e}({});let m=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid;return(0,i.Sk)("/api/organizations/".concat(t,"/projects/count"),{queryKey:[u.Wy,{orgUuid:t}],staleTime:3e5,enabled:!!t,meta:{noToast:e=>e instanceof s.LG&&"permission_error"===e.type}})},h=e=>{let{enabled:t=!0,limit:n,offset:a,starred:o,creatorFilter:s,projectFilter:c,orderBy:l,type:d}=e,{activeOrganization:g}=(0,r.YL)(),_=(0,v.K)(),p=null==g?void 0:g.uuid,y=new URLSearchParams;return y.append("include_harmony_projects","true"),void 0!==n&&y.append("limit",n.toString()),void 0!==a&&y.append("offset",a.toString()),void 0!==o&&y.append("starred",o.toString()),void 0!==s&&y.append("creator_filter",s.toString()),void 0!==c&&y.append("filter",c.toString()),void 0!==l&&y.append("order_by",l.toString()),void 0!==d&&y.append("type",d.toString()),(0,i.Sk)("/api/organizations/".concat(p,"/projects?").concat(y.toString()),{queryKey:[u.BP,{orgUuid:p},{limit:n,offset:a,starred:o,creatorFilter:s,projectFilter:c,orderBy:l,type:d}],enabled:!!(t&&g&&_),select:e=>{let t=e.length===n;return Object.assign(e.filter(e=>!e.archived_at),{hasMore:t})}})},S=e=>{let{enabled:t=!0,limit:n=_,offset:a=0,starred:o,creatorFilter:s,projectFilter:c,orderBy:l,searchQuery:d}=e,{activeOrganization:g}=(0,r.YL)(),p=(0,v.K)(),y=null==g?void 0:g.uuid,f=new URLSearchParams;return f.append("limit",n.toString()),f.append("offset",a.toString()),void 0!==o&&f.append("starred",o.toString()),void 0!==s&&f.append("creator_filter",s.toString()),void 0!==c&&f.append("filter",c.toString()),void 0!==l&&f.append("order_by",l.toString()),void 0!==d&&f.append("searchQuery",d.toString()),(0,i.Sk)("/api/organizations/".concat(y,"/projects_v2?").concat(f.toString()),{queryKey:[u.Wf,{orgUuid:y},{limit:n,offset:a,starred:o,creatorFilter:s,projectFilter:c,orderBy:l,searchQuery:d}],enabled:!!(t&&g&&p)})},L=()=>{let{activeOrganization:e}=(0,r.YL)(),t=(0,i.mn)();return(0,d.useCallback)(async()=>(await t("/api/organizations/".concat(null==e?void 0:e.uuid,"/projects"))).json(),[null==e?void 0:e.uuid,t])},b=()=>{let e=L(),t=(0,a.uE)();return(0,d.useCallback)(async()=>{let[n,i]=await Promise.all([e(),t({limit:a.dy})]);return((e,t)=>{let n=e.map(e=>({...e,lastConversation:null==t?void 0:t.find(t=>t.project_uuid===e.uuid)})).filter(e=>e.lastConversation).sort((e,t)=>new Date(t.lastConversation.created_at).getTime()-new Date(e.lastConversation.created_at).getTime()),a=null==e?void 0:e.filter(e=>!n.find(t=>t.uuid===e.uuid));return[...n,...a]})(n,i)},[t,e])},k=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid;return(0,i.Sk)("/api/organizations/".concat(n,"/projects/").concat(e),{queryKey:[u.hc,{orgUuid:n,projectUuid:e}],enabled:!!(t&&e),staleTime:0,meta:{noToast:e=>e instanceof s.LG&&(404===e.statusCode||403===e.statusCode)}})},w=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=(0,l.useQueryClient)();return{addProject:e=>{n.setQueriesData({queryKey:[u.Wf,{orgUuid:t}]},t=>t?{...t,data:[e,...t.data],pagination:{...t.pagination,total:t.pagination.total+1}}:t),n.setQueriesData({queryKey:[u.BP,{orgUuid:t}]},t=>t?[e,...t]:t),n.setQueriesData({queryKey:[u.Wy,{orgUuid:t}]},e=>e?{count:e.count+1}:e)},removeProject:e=>{n.setQueriesData({queryKey:[u.Wf,{orgUuid:t}]},t=>t?{...t,data:t.data.filter(t=>t.uuid!==e),pagination:{...t.pagination,total:Math.max(0,t.pagination.total-1)}}:t),n.setQueriesData({queryKey:[u.BP,{orgUuid:t}]},t=>t?t.filter(t=>t.uuid!==e):t),n.setQueriesData({queryKey:[u.Wy,{orgUuid:t}]},e=>e?{count:Math.max(0,e.count-1)}:e)}}},T=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=Q(),{addProject:a}=w();return(0,i.L2)(()=>"/api/organizations/".concat(t,"/projects"),"POST",{onSuccess:e=>{a(e),n()}})},P=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,a=Q();return(0,i.Qv)(()=>"/api/organizations/".concat(n,"/projects/").concat(e),"PUT",(e,t)=>t?{...t,...e}:void 0,{onSuccess:()=>{a(e)},queryKey:[u.hc,{orgUuid:n,projectUuid:e}]})},E=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,a=Q(),{removeProject:o}=w();return(0,i.L2)(()=>"/api/organizations/".concat(n,"/projects/").concat(e),"DELETE",{onSuccess:()=>{o(e),a(e,{remove:!0})}})},C=function(e){let{limit:t=30,offset:n=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:a}=(0,r.YL)(),o=null==a?void 0:a.uuid,c=new URLSearchParams;return c.append("limit",t.toString()),c.append("offset",n.toString()),(0,i.Sk)("/api/organizations/".concat(o,"/projects/").concat(e,"/conversations_v2?").concat(c.toString()),{queryKey:[u.yF,{orgUuid:o,projectUuid:e,limit:t,offset:n}],enabled:!!a,staleTime:0,meta:{noToast:e=>e instanceof s.LG&&403===e.statusCode}})},A=()=>{var e,t;let n=h({enabled:!0,creatorFilter:"is_creator",limit:p}),a=null==(t=n.data)||null==(e=t.find(e=>e.is_starter_project))?void 0:e.uuid;return{...n,data:a}},Q=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=(0,l.useQueryClient)();return(e,a)=>{let{remove:i=!1}=a||{};if([[u.BP,{orgUuid:t}],[u.Wf,{orgUuid:t}],[u.Wy,{orgUuid:t}]].forEach(e=>void n.invalidateQueries({queryKey:e})),e){let a=i?"removeQueries":"invalidateQueries";[[u.hc,{orgUuid:t,projectUuid:e}],[u.yF,{orgUuid:t,projectUuid:e}],[u.vE,{projectUuid:e}]].forEach(e=>void n[a]({queryKey:e}))}}},j=(e,t)=>{let n=Q();return(0,i.L2)("/api/organizations/".concat(e,"/projects/").concat(t,"/report"),"POST",{enabled:!!t&&!!e,onSuccess:()=>{n(t)}})},I=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,{value:a}=(0,c.fS)("claude_ai_sticky_project_settings");return(0,i.Sk)("/api/organizations/".concat(n,"/projects/").concat(e,"/settings"),{queryKey:[u.vX,{orgUuid:n,projectUuid:e}],enabled:!!(t&&e&&a)})},z=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,{value:a}=(0,c.fS)("claude_ai_sticky_project_settings");return(0,i.Qv)(()=>"/api/organizations/".concat(n,"/projects/").concat(e,"/settings"),"PUT",(e,t)=>t?{...t,...e}:void 0,{queryKey:[u.vX,{orgUuid:n,projectUuid:e}],enabled:!!(t&&e&&a)})},G=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=(0,l.useQueryClient)();return(0,i.L2)(e=>"/api/organizations/".concat(t,"/projects/").concat(e.projectUuid,"/sync"),"POST",{meta:{noToast:!0},onSuccess:(e,a)=>{"done"===e.kb_resync_status&&a.projectUuid&&n.invalidateQueries({queryKey:[u.qz,{orgUuid:t,projectUuid:a.projectUuid}]})}})},R=()=>{let{value:e}=(0,c.fS)("claudeai_sync_project");return e},q=()=>{let{mutateAsync:e}=(0,a.x6)();return{moveToProject:(0,d.useCallback)(async function(t,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{batchSize:i=20,batchDelayMs:r=500}=a;if(!t.length||!n)return Promise.resolve({totalMoved:0,totalFailed:0,conversationUuids:[],projectUuid:""});let o=t.length>1,s=0,u=0;if(o){let a=Math.ceil(t.length/i);for(let o=0;o<a;o++){let c=o*i,l=t.slice(c,c+i),d=await e({conversation_uuids:l,project_uuid:n});s+=d.moved.length,u+=d.failed.length,o<a-1&&await new Promise(e=>setTimeout(e,r))}}else{let a=await e({conversation_uuids:t,project_uuid:n});s=a.moved.length,u=a.failed.length}return{totalMoved:s,totalFailed:u,conversationUuids:t,projectUuid:n}},[e])}},K=()=>{let{mutateAsync:e}=(0,a.x6)(),{addSuccess:t,addError:n}=(0,o.Y)(),i=(0,g.A)(),s=(0,l.useQueryClient)(),{activeOrganization:c}=(0,r.YL)(),v=null==c?void 0:c.uuid,[_,p]=(0,d.useState)(new Set),y=(0,d.useCallback)(async function(a){let{showSuccess:r=!0,showError:o=!0,onSuccess:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!a.length)return Promise.resolve({moved:[],failed:[]});if(a.some(e=>_.has(e)))return Promise.resolve({moved:[],failed:a});p(e=>{let t=new Set(e);return a.forEach(e=>t.add(e)),t}),a.forEach(e=>{let t=[u.fC,{orgUuid:v},{uuid:e}];s.getQueryData(t)&&s.setQueryData(t,e=>e?{...e,project_uuid:void 0}:e)});try{let n=await e({conversation_uuids:a,project_uuid:null});return n.moved.length>0&&r&&t(i.formatMessage({defaultMessage:"Chat removed from project",id:"UkGfrdMZdS"})),null==c||c(n),await Promise.all(a.map(e=>s.invalidateQueries({queryKey:[u.fC,{orgUuid:v},{uuid:e}]}))),n}catch(e){throw await Promise.all(a.map(e=>s.invalidateQueries({queryKey:[u.fC,{orgUuid:v},{uuid:e}]}))),o&&n(i.formatMessage({defaultMessage:"Failed to remove chat from project",id:"4suoYkIuEm"}),{error:e,messageForLogging:"Failed to remove chat from project"}),e}finally{p(e=>{let t=new Set(e);return a.forEach(e=>t.delete(e)),t})}},[e,t,n,i,_,s,v]),f=(0,d.useCallback)(e=>_.has(e),[_]);return{removeFromProject:y,isRemoving:_.size>0,isRemovingConversation:f}}},94028:(e,t,n)=>{n.d(t,{Bg:()=>c,fR:()=>g,iV:()=>d,ih:()=>l,nI:()=>v});var a=n(1613),i=n(64328),r=n(35984),o=n(80688),s=n(2e3),u=n(4869);let c=()=>{let{account:e,activeOrganization:t}=(0,i.YL)(),n=null==e?void 0:e.uuid,r=null==t?void 0:t.uuid,c=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(r,"/sync/mcp/drive/ingest"),"POST",{onSuccess:()=>{setTimeout(()=>{c.invalidateQueries({queryKey:[o.hx,{orgUuid:r,accountUuid:n,syncSourceType:s.v8.GDRIVE}]})},300)}})},l=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid,{addError:n}=(0,r.Y)(),c=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(t,"/sync/ingestion/gdrive/clean_up"),"POST",{onSuccess:()=>{c.invalidateQueries({queryKey:[o.hx,{orgUuid:t,syncSourceType:s.v8.GDRIVE}]})},onError:e=>{n(e.message,{error:e,errorContext:{tags:{source:"knowledge_cleanup_ingestion"}}})}})},d=e=>{let{activeOrganization:t}=(0,i.YL)(),n=null==t?void 0:t.uuid,r=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(n,"/projects/").concat(e,"/kb/resync"),"POST",{enabled:!!e,meta:{noToast:!0},onSuccess:t=>{"done"===t.status&&r.invalidateQueries({queryKey:[o.qz,{orgUuid:n,projectUuid:e}]})}})},g=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{activeOrganization:n}=(0,i.YL)(),r=null==n?void 0:n.uuid;return(0,a.Sk)("/api/organizations/".concat(r,"/projects/").concat(e,"/kb/stats"),{queryKey:[o.qz,{orgUuid:r,projectUuid:e}],enabled:!!e&&t})},v=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/conversation/backfill"),"POST",{})}},94295:(e,t,n)=>{n.d(t,{B5:()=>v,BL:()=>L,DK:()=>_,IX:()=>C,Jy:()=>b,Ng:()=>h,Nv:()=>S,QP:()=>Q,Z5:()=>m,a0:()=>p,gz:()=>A,jU:()=>T,kd:()=>E,mY:()=>f,nX:()=>w,vt:()=>g,yJ:()=>k,zt:()=>y});var a=n(74813),i=n(1613),r=n(44995),o=n(16178),s=n(96089),u=n(80688),c=n(66365),l=n(4869),d=n(27541);function g(e,t){return(0,i.Sk)("/api/auth/login_methods?email=".concat(encodeURIComponent(e||""),"&source=").concat(t),{enabled:!!e&&(0,s.B9)(e),meta:{noToast:!0}})}let v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,a.st)(),n=(0,r.fZ)();return(0,i.L2)("/api/auth/send_magic_link","POST",{...e,onSuccess:(n,a,i)=>{n.sso_url?t({event_key:"login.email.sso_initiated"}):t({event_key:"login.email.magic_link_sent"}),e.onSuccess&&e.onSuccess(n,a,i)},onError:(n,a,i)=>{t({event_key:"login.email.magic_link_send_error",error:n.message,error_type:n instanceof o.LG?n.type:"unknown"}),e.onError&&e.onError(n,a,i)},onMutate:e=>{t({event_key:"login.email.sending_magic_link"})},transformVariables:e=>({...e,source:n?"claude":"console"})})},_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.fZ)();return(0,i.L2)("/api/auth/exchange_nonce_for_code","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,a.st)(),n=(0,r.fZ)(),s=(0,r.Mk)(),{client:u}=(0,c.useStatsigClient)();return(0,i.L2)("/api/auth/verify_magic_link","POST",{...e,onSuccess:(n,a,i)=>{"code"===a.credentials.method?t({event_key:"login.email.finished"}):t({event_key:"login.email.magic_link_success"}),P(u,n,t,"email","magic_link",s),e.onSuccess&&e.onSuccess(n,a,i)},onError:(n,a,i)=>{if("code"===a.credentials.method){let e="unknown";"already_used"===n.message?e="already_used":n instanceof o.LG&&"rate_limit_error"===n.type?e="rate_limit":n instanceof o.LG&&400===n.statusCode&&(e="incorrect_code"),t({event_key:"login.email.code_verification_error",error:n.message,error_type:e})}else t({event_key:"login.email.magic_link_verification_error",error:n.message});e.onError&&e.onError(n,a,i)},onMutate:e=>{"code"===e.credentials.method?t({event_key:"login.email.verifying_code"}):t({event_key:"login.email.verifying_magic_link"})},transformVariables:e=>({...e,source:n?"claude":"console"})})},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,a.st)(),n=(0,r.fZ)(),o=(0,r.Mk)(),s=(0,d.useRouter)(),{client:u}=(0,c.useStatsigClient)();return(0,i.L2)("/api/auth/verify_google","POST",{...e,onSuccess:(n,a,i)=>{!n.success&&n.sso_url?(t({event_key:"login.email.sso_initiated"}),s.push(n.sso_url)):(t({event_key:"login.google.finished"}),P(u,n,t,"google","button",o),e.onSuccess&&e.onSuccess(n,a,i))},onError:(n,a,i)=>{t({event_key:"login.google.verification_error",error:n.message}),e.onError&&e.onError(n,a,i)},onMutate:e=>{t({event_key:"login.google.verifying"})},transformVariables:e=>({...e,source:n?"claude":"console"})})},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,a.st)(),n=(0,r.fZ)(),o=(0,r.Mk)(),s=(0,d.useRouter)(),{client:u}=(0,c.useStatsigClient)();return(0,i.L2)("/api/auth/verify_google_mobile","POST",{...e,onSuccess:(n,a,i)=>{!n.success&&n.sso_url?(t({event_key:"login.email.sso_initiated"}),s.push(n.sso_url)):(t({event_key:"login.google.finished",flow_type:"one_tap"}),P(u,n,t,"google","onetap",o),e.onSuccess&&e.onSuccess(n,a,i))},onError:(n,a,i)=>{t({event_key:"login.google.verification_error",error:n.message}),e.onError&&e.onError(n,a,i)},onMutate:e=>{t({event_key:"login.google.verifying"})},transformVariables:e=>({...e,source:n?"claude":"console"})})},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,a.st)(),n=(0,r.fZ)(),o=(0,d.useRouter)();return(0,i.L2)("/api/auth/accept_invite","POST",{...e,onSuccess:(n,a,i)=>{!n.success&&n.sso_url?(t({event_key:"login.email.sso_initiated"}),o.push(n.sso_url)):e.onSuccess&&e.onSuccess(n,a,i)},transformVariables:e=>({...e,source:n?"claude":"console"})})},h=()=>(0,i.L2)("/api/auth/logout","POST"),S=()=>(0,i.L2)("/api/auth/logout/all-sessions","POST"),L=()=>{let e=(0,l.useQueryClient)();return(0,i.L2)("/api/account?statsig_hashing_algorithm=djb2","PUT",{async onSuccess(){await e.invalidateQueries({queryKey:[u.Rw]})}})},b=()=>(0,i.Qv)("/api/account?statsig_hashing_algorithm=djb2","PUT",(e,t)=>(null==t?void 0:t.account)?{...t,account:{...t.account,settings:e}}:t,{queryKey:[u.Rw],transformVariables:e=>({settings:e})}),k=()=>(0,i.Qv)("/api/account/settings","PATCH",(e,t)=>(null==t?void 0:t.account)?{...t,account:{...t.account,settings:{...t.account.settings,...e}}}:t,{queryKey:[u.Rw]}),w=()=>{let e=(0,l.useQueryClient)();return(0,i.L2)("/api/account/accept_legal_docs","PUT",{async onSuccess(){await e.invalidateQueries({queryKey:[u.Rw]})}})},T=()=>(0,i.L2)("/api/account/email_consent","PUT");function P(e,t,n,a,i,r){t.created&&n({event_key:"login.account.created",surface:r,authMethod:a,flow:i},t.account)}function E(e){return(0,i.Sk)("/api/signups/".concat(e),{enabled:!!e,staleTime:0})}function C(e){return(0,i.Sk)("/api/enterprise_auth/idp_redirect_url?organization_id=".concat(e),{meta:{noToast:!0}})}function A(e,t,n){return(0,i.Sk)("/api/enterprise_auth/sso_callback?code=".concat(e,"&state=").concat(t,"&source=").concat(n),{meta:{noToast:!0}})}function Q(e,t){var n;let a=(0,l.useQueryClient)();return(0,i.L2)("/api/highside/login","GET",{...t,headers:{...null!=(n=t.headers)?n:{},...e},async onSuccess(){for(var e,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];await a.invalidateQueries({queryKey:[u.Rw]}),null==(e=t.onSuccess)||e.call(t,...i)}})}},96089:(e,t,n)=>{n.d(t,{B9:()=>i,Lj:()=>r});let a=/^[A-Za-z0-9._%+\u0027-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}$/,i=e=>a.test(e),r=(e,t)=>{if(!t)return!1;let n=e.split("@")[1];return t.includes(n)}}}]);